/* ===== DOKKAEBI — NEON CHARCOAL DELUXE ===== */
:root{
  --bg:#070a14; --bg-2:#0a1326;
  --text:#def1ff; --muted:#9fb0d7;
  --line:#26345f; --glass:rgba(11,18,38,.62);
  --primary:#53ffe9; --secondary:#88a7ff; --purple:#a753ff; --danger:#ff7ba1;
  --shadow:0 14px 36px rgba(0,0,0,.5);
}

*{box-sizing:border-box}
html, body, #root{height:100%}
body{
  margin:0; color:var(--text); background:var(--bg);
  font-family:ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
  letter-spacing:.2px;
}

/* === 로고 고정 배경 보존 === */
.fixed-bg{
  position:fixed; inset:0; z-index:-3; display:flex; align-items:center; justify-content:center; pointer-events:none; overflow:hidden;
}
.fixed-bg-img{ width:auto; height:auto; object-fit:contain; filter:drop-shadow(0 8px 40px rgba(0,0,0,.35)); }
.fixed-bg-overlay{ position:fixed; inset:0; z-index:-2; pointer-events:none; }

/* === 네온 백드롭 === */
.bg-aurora{
  position:fixed; inset:-20vh -20vw -15vh -20vw; z-index:-4; pointer-events:none;
  background:
    radial-gradient(1100px 560px at 85% -10%, rgba(136,167,255,.22), transparent 60%),
    radial-gradient(900px 540px at -10% 110%, rgba(83,255,233,.16), transparent 60%),
    radial-gradient(700px 420px at 10% 10%, rgba(167,83,255,.16), transparent 60%),
    linear-gradient(180deg, var(--bg-2), var(--bg));
  animation: aurora-move 9s ease-in-out infinite alternate;
}
@keyframes aurora-move{
  0%{ filter:hue-rotate(0deg) brightness(1); }
  100%{ filter:hue-rotate(18deg) brightness(1.05); }
}
.bg-grid{
  position:fixed; inset:0; z-index:-1; pointer-events:none;
  background:
    linear-gradient(rgba(255,255,255,.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.05) 1px, transparent 1px);
  background-size:26px 26px;
  mask-image: radial-gradient(1300px 640px at 50% 0%, rgba(0,0,0,.85), transparent 70%);
  opacity:.9;
}

/* === 레이아웃/헤더 === */
.stage{ max-width:1200px; margin:0 auto; padding:14px; position:relative }
.topbar{
  position:sticky; top:10px; z-index:10; display:flex; gap:12px; align-items:center; justify-content:space-between;
  padding:10px 12px; margin-bottom:14px; border:1px solid var(--line); border-radius:16px;
  background:linear-gradient(180deg, rgba(255,255,255,.05), transparent), var(--glass);
  backdrop-filter:blur(10px); box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
}
.logo{ margin:0; font-size:clamp(18px,3.2vw,22px); letter-spacing:.6px; display:flex; align-items:center; gap:8px }
.glow-dot{ width:10px; height:10px; border-radius:50%; background:var(--primary); box-shadow: 0 0 14px var(--primary), 0 0 36px var(--primary); }
.thin{ opacity:.6 }

.toolbar{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; justify-content:flex-end }
.search-input{
  flex:1 1 340px; min-width:240px; background:#081129; color:var(--text); border:1px solid var(--line);
  border-radius:12px; padding:10px 12px; box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
}

/* === 버튼 === */
.btn{
  appearance:none; cursor:pointer; border-radius:14px; border:1px solid var(--line); padding:9px 12px; color:var(--text);
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0)); transition:transform .08s ease, box-shadow .2s ease, border-color .2s ease, background .25s ease;
}
.btn:hover{ box-shadow:0 0 0 2px rgba(255,255,255,.04) inset; }
.btn:active{ transform:translateY(1px) }
.btn:focus-visible{ outline:2px solid var(--secondary); outline-offset:2px }
.btn-compact{ padding:4px 8px; border-radius:12px }
.btn-ghost{ background:transparent }
.btn-primary{
  border-color:#1a6e68;
  background:
    radial-gradient(220px 120px at 50% -20%, rgba(83,255,233,.28), transparent),
    linear-gradient(180deg, rgba(83,255,233,.26), rgba(83,255,233,.07));
  box-shadow:0 0 36px rgba(83,255,233,.24), 0 0 90px rgba(83,255,233,.12);
}
.btn-secondary{
  border-color:#2a3b88;
  background:
    radial-gradient(220px 120px at 50% -20%, rgba(136,167,255,.22), transparent),
    linear-gradient(180deg, rgba(136,167,255,.22), rgba(136,167,255,.06));
  box-shadow:0 0 36px rgba(136,167,255,.22), 0 0 90px rgba(136,167,255,.12);
}
.btn-danger{
  border-color:#6a2a46;
  background:
    radial-gradient(220px 120px at 50% -20%, rgba(255,123,161,.28), transparent),
    linear-gradient(180deg, rgba(255,123,161,.22), rgba(255,123,161,.07));
  color:#ffdbe6; box-shadow:0 0 36px rgba(255,123,161,.24), 0 0 90px rgba(255,123,161,.12);
}

/* === 드롭다운 === */
.menu-wrap{ position:relative }
.menu{
  position:absolute; right:0; top:calc(100% + 8px); background:#0a132a; border:1px solid var(--line); border-radius:12px;
  box-shadow:var(--shadow); padding:6px; min-width:230px; z-index:15;
}
.menu-item{ display:block; width:100%; text-align:left; padding:9px 10px; border-radius:10px; color:var(--text); background:transparent; border:0; cursor:pointer; }
.menu-item:hover{ background:#0f1a3a }
.menu-item.disabled{ opacity:.55; cursor:not-allowed; text-decoration:underline dotted }

/* === 카드/패널 === */
.glass{ background:var(--glass); backdrop-filter:blur(2px) }
.panel{ border:1px solid var(--line); border-radius:16px; padding:12px 14px; margin-bottom:14px; box-shadow:inset 0 0 0 1px rgba(255,255,255,.02) }
.panel-title{ margin:0 0 8px; letter-spacing:.4px }
.right{ text-align:right }
.grid{ display:grid; gap:12px; grid-template-columns:repeat(auto-fit, minmax(320px, 1fr)); }
.card{ border:1px solid var(--line); border-radius:18px; overflow:hidden; box-shadow:inset 0 0 0 1px rgba(255,255,255,.02) }
.card:hover{ box-shadow:0 0 0 1px rgba(255,255,255,.04), 0 16px 44px rgba(0,0,0,.35) }
.card-head{
  display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--line);
  background:linear-gradient(180deg, rgba(255,255,255,.06), transparent); cursor:zoom-in;
}
.card-title{ margin:0; font-size:18px; }
.card-body{ max-height:360px; overflow:auto; padding:10px 12px; overscroll-behavior:contain }
.summary,.sub-summary{ cursor:pointer; color:#cfe4ff }

/* === 아이템 === */
.item-list{ list-style:none; padding:0; margin:6px 0 }
.item-row{
  display:flex; align-items:center; justify-content:space-between; gap:10px; padding:8px 2px;
  border-bottom:1px dashed rgba(147,167,210,.22);
}
.item-text{ display:flex; flex-direction:column; gap:4px; min-width:0; flex:1 1 auto }
.item-name{
  display:inline-flex; align-items:baseline; gap:8px; min-width:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  text-shadow:0 0 10px rgba(136,167,255,.15), 0 0 18px rgba(83,255,233,.12);
}
.item-count{ color:#a9b8e0; font-weight:700 }
.item-note{
  color:var(--muted); background:rgba(147,167,210,.10); border:1px solid rgba(147,167,210,.22);
  border-radius:10px; padding:6px 8px;
}
.item-actions{ display:flex; gap:6px; flex-wrap:nowrap }
@media (max-width:420px){ .item-actions{ flex-wrap:wrap } }

/* === 검색 결과 === */
.result-list{ list-style:none; padding:0; margin:6px 0 }
.result-item{ padding:6px 0; border-bottom:1px dashed rgba(147,167,210,.22) }
.result-name{ font-weight:700 }
.link{ color:#cfe4ff; cursor:pointer }
.link:hover{ text-decoration:underline }
.pill{ background:#0b1836; border:1px solid var(--line); padding:2px 8px; border-radius:999px; font-size:12px; margin-right:6px }
.result-locs{ margin-top:4px }
.chip{ margin-left:8px; padding:2px 8px; border-radius:999px; background:rgba(83,255,233,.16); border:1px solid #196e6a; color:#a7fff4 }

/* === 팝업 === */
.overlay{ position:fixed; inset:0; background:rgba(0,0,0,.5); display:flex; align-items:center; justify-content:center; z-index:20 }
.popup{ width:min(1000px,94vw); max-height:84vh; overflow:hidden; border:1px solid var(--line); border-radius:18px; box-shadow:var(--shadow) }
.popup-head{ display:flex; align-items:center; justify-content:space-between; padding:12px 14px; border-bottom:1px solid var(--line); background:var(--glass) }
.popup-title{ margin:0 }
.popup-body{ padding:10px 12px; max-height:70vh; overflow:auto }

/* === 로그 === */
.log-list{ list-style:none; padding:0; margin:6px 0 }
.log-row{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:10px 6px; border-bottom:1px dashed rgba(147,167,210,.22) }
.log-text{ min-width:0; flex:1 1 auto }
.log-line{ font-size:14px }
.time{ color:#cfe4ff }
.mark{ margin-top:4px; font-weight:800; text-shadow:0 0 14px rgba(83,255,233,.18) }
.mark.in{ color:#53ffe9 }
.mark.out{ color:#ff9fbd }
.small{ font-size:12px }

/* === 로그인 === */
.login-stage{ min-height:100vh; display:grid; place-items:center; padding:20px; position:relative }
.login-orbit{
  position:fixed; inset:-20vh -15vw; pointer-events:none; z-index:-4;
  background:
    radial-gradient(800px 400px at 70% 10%, rgba(83,255,233,.18), transparent 60%),
    radial-gradient(700px 360px at 0% 100%, rgba(136,167,255,.14), transparent 60%),
    radial-gradient(600px 320px at 10% 0%, rgba(167,83,255,.14), transparent 60%),
    linear-gradient(180deg, var(--bg-2), var(--bg));
  animation: aurora-move 10s ease-in-out infinite alternate;
}
.login-card{
  width:min(560px,94vw); background:linear-gradient(180deg, rgba(255,255,255,.05), transparent), var(--glass);
  border:1px solid var(--line); border-radius:20px; padding:18px; box-shadow:var(--shadow);
}
.neon-rise{ animation: neon-rise .22s ease }
@keyframes neon-rise{ from{ transform:translateY(6px); opacity:0 } to{ transform:translateY(0); opacity:1 } }
.brand{ text-align:center; margin-bottom:12px }
.brand-badge{ display:inline-flex; gap:8px; margin-bottom:6px }
.dot{ width:8px; height:8px; border-radius:50%; display:inline-block }
.dot-cyan{ background:var(--primary); box-shadow:0 0 12px var(--primary) }
.dot-purple{ background:var(--purple); box-shadow:0 0 12px var(--purple) }
.dot-blue{ background:var(--secondary); box-shadow:0 0 12px var(--secondary) }
.brand-title{ margin:0; font-size:clamp(20px,4vw,26px); letter-spacing:1px; text-shadow:0 0 14px rgba(83,255,233,.2) }
.brand-sub{ margin:4px 0 0; color:#a8b7dc }

.login-form{ display:grid; gap:8px }
.login-label{ font-size:12px; color:#a8b7dc }
.login-input-row{ display:flex; gap:8px }
.login-input-row--nowrap{ flex-wrap:nowrap }
.login-input{
  width:100%; background:#071128; color:var(--text); border:1px solid var(--line); border-radius:12px; padding:12px;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
}
.login-input--flex{ flex:1 1 auto; min-width:0 }
.login-eye-side{ flex:0 0 auto }
.login-submit{ width:100%; margin-top:6px }

/* === 효과 === */
.spinner{ width:14px; height:14px; border-radius:50%; border:2px solid rgba(150,170,210,.35); border-top-color:var(--text); display:inline-block; margin-right:6px; animation:spin 1s linear infinite }
.sync-indicator{ position:fixed; top:12px; right:12px; padding:8px 10px; border-radius:12px; background:#0b132a; border:1px solid var(--line); z-index:30; font-size:13px }
.lift-in{ animation: lift-in .2s ease }
@keyframes lift-in{ from{ transform:translateY(4px); opacity:0 } to{ transform:translateY(0); opacity:1 } }
@keyframes spin{ to{ transform:rotate(360deg) } }

/* 기본 summary 스타일 */
summary{ cursor:pointer; user-select:none }
details{ margin-bottom:6px }

/* === 유틸 === */
.muted{ color:var(--muted); }

/* === 반응형 헤더 스택: 화면이 줄수록 타이틀↑ 검색창↓ === */
@media (max-width: 960px){
  .topbar{ flex-direction:column; align-items:stretch; gap:10px; padding:12px }
  .logo{ align-self:flex-start; font-size:clamp(18px,4.2vw,22px) }
  .toolbar{
    display:flex; flex-wrap:wrap; gap:8px; justify-content:flex-start;
  }
  .toolbar .search-input{
    order:2;
    flex:1 1 100%;
    min-width:0;
    margin-top:4px;
  }
  .toolbar > .btn, .toolbar > .menu-wrap{ order:1 }
}
@media (max-width:600px){
  .stage{ padding:10px; }
  .topbar{ position:sticky; top:8px; }
  .grid{ grid-template-columns: 1fr; }
  .card-body{ max-height:60vh; }
  .panel{ padding:10px 12px; }
  .panel .log-list{ max-height:60vh; overflow:auto; overscroll-behavior:contain; }
  .popup{ width:94vw; max-height:88vh; }
  .popup-body{ max-height:74vh; }
  .login-stage{ min-height:100dvh; }
}

/* === ✅ 추가: 카테고리/하위카테고리 공간감 피드백 === */
.summary, .sub-summary {
  transition: background .25s ease, box-shadow .25s ease, transform .12s ease, color .2s ease;
}
details[open] > .summary {
  background: linear-gradient(180deg, rgba(83,255,233,.10), rgba(136,167,255,.06));
  box-shadow:
    0 0 0 1px rgba(136,167,255,.25) inset,
    0 8px 24px rgba(83,255,233,.18);
  transform: translateY(-1px) scale(1.015);
  border-radius: 10px;
}
.sub-summary {
  position: relative;
  padding-left: 12px;
}
.sub-summary::before {
  content: "";
  position: absolute;
  left: 0; top: 50%;
  width: 6px; height: 10px;
  transform: translateY(-50%);
  border-radius: 3px;
  background: linear-gradient(180deg, rgba(83,255,233,.65), rgba(136,167,255,.4));
  box-shadow: 0 0 14px rgba(83,255,233,.5);
  transition: height .22s ease, box-shadow .22s ease, opacity .2s ease;
  opacity: .75;
}
details[open] > .sub-summary::before {
  height: 16px;
  box-shadow: 0 0 22px rgba(83,255,233,.8), 0 0 36px rgba(136,167,255,.5);
  opacity: 1;
}

/* === ✅ 추가: 네온 스크롤바 (WebKit + Firefox) === */
.card-body::-webkit-scrollbar,
.panel .log-list::-webkit-scrollbar,
.popup-body::-webkit-scrollbar,
body::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}
.card-body::-webkit-scrollbar-track,
.panel .log-list::-webkit-scrollbar-track,
.popup-body::-webkit-scrollbar-track,
body::-webkit-scrollbar-track {
  background: rgba(11,18,38,.35);
  border-radius: 10px;
}
.card-body::-webkit-scrollbar-thumb,
.panel .log-list::-webkit-scrollbar-thumb,
.popup-body::-webkit-scrollbar-thumb,
body::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, rgba(83,255,233,.55), rgba(136,167,255,.5));
  border: 2px solid rgba(7,10,20,.85);
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(83,255,233,.35);
}
.card-body::-webkit-scrollbar-thumb:hover,
.panel .log-list::-webkit-scrollbar-thumb:hover,
.popup-body::-webkit-scrollbar-thumb:hover,
body::-webkit-scrollbar-thumb:hover {
  box-shadow: 0 0 18px rgba(83,255,233,.6);
}
/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(83,255,233,.6) rgba(11,18,38,.35);
}
/* === LogsPage: 고정 액션 버튼 === */
.log-row {
  position: relative;          /* 자식 절대배치 기준 */
  padding-right: 132px;        /* 오른쪽에 버튼 자리 확보 */
}

.log-row .log-actions {
  position: absolute;
  top: 50%;
  right: 12px;
  transform: translateY(-50%); /* 세로 중앙 고정 */
  display: flex;
  gap: 8px;
  white-space: nowrap;         /* 줄바꿈 방지 (버튼 줄 안깨짐) */
  z-index: 1;                  /* 텍스트 위에 */
}

/* 넓이 줄어들면 여백 조금 줄이기 */
@media (max-width: 960px) {
  .log-row { padding-right: 116px; }
  .log-row .log-actions { right: 10px; }
}

/* 모바일(≤600px): 버튼을 항목 하단-우측에 고정해 겹침 방지 */
@media (max-width: 600px) {
  .log-row {
    padding-right: 12px;        /* 본문은 꽉 채우고 */
    padding-bottom: 48px;       /* 아래에 버튼 자리 확보 */
  }
  .log-row .log-actions {
    top: auto;
    bottom: 10px;
    right: 12px;
    transform: none;            /* 하단 고정 */
  }
}
